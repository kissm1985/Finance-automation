from config import DCA_AMOUNT, INVESTMENT_INTERVAL_DAYS
from load_data import load_all_price_data
from optimize_portfolio import optimize_portfolio
from dca_strategy import apply_dca_strategy
from sell_logic import check_and_generate_sell_signals
from backtest import run_backtest

def main():
    # 1. Árfolyamadatok beolvasása
    price_data = load_all_price_data()

    # 2. Kvantum alapú optimalizálás
    optimal_weights = optimize_portfolio(price_data)

    # 3. Eladási javaslatok ellenőrzése (S1–S4 szabályok szerint)
    sell_signals = check_and_generate_sell_signals(price_data, optimal_weights)

    # 4. DCA stratégia alkalmazása a vásárláshoz
    apply_dca_strategy(price_data, optimal_weights, sell_signals)

    # 5. Visszateszt (teljes időtávra)
    run_backtest(price_data)

if __name__ == "__main__":
    main()
